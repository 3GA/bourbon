@mixin retina-image($filename, $image-width, $image-height, $extension: png, $retina-filename: null, $asset-pipeline: false) {
  background-image: url($filename + "." + $extension);
  height: $image-height;
  width:  $image-width;

  @media (min--moz-device-pixel-ratio: 1.3),
           (-o-min-device-pixel-ratio: 2.6/2),
      (-webkit-min-device-pixel-ratio: 1.3),
              (min-device-pixel-ratio: 1.3),
                      (min-resolution: 1.3dppx) {

    @if $asset-pipeline {
      @if $retina-filename {
        background-image: image_url($retina-filename + "@2x" + "." + $extension);
      }
      @else {
        background-image: image_url($filename + "@2x" + "." + $extension);
      }
    }

    @else {
      @if $retina-filename {
        background-image: url($retina-filename + "@2x" + "." + $extension);
      }
      @else {
        background-image: url($filename + "@2x" + "." + $extension);
      }
    }

    background-size:  $image-width $image-height;

  }
}
